[TOC]

# 分区
查看磁盘
```
> lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
nvme0n1      8:0    0 1000G  0 disk
```
格式化
```
> gdisk /dev/nvme0n1
Partition table scan:
  MBR: MBR only
  BSD: not present
  APM: not present
  GPT: not present

***************************************************************
Found invalid GPT and valid MBR; converting MBR to GPT format
in memory. THIS OPERATION IS POTENTIALLY DESTRUCTIVE! Exit by
typing 'q' if you don't want to convert your MBR partitions
to GPT format!
***************************************************************

# boot
Command (? for help): o # create a new empty GUID partition table (GPT) 回车，y全清磁盘

Command (? for help): n # 创建分区
Partition number (1-128, default 1): #在这里按回车用它提供的默认值
First sector (34-15634398, default = 2048) or {+-}size{KMGTP}: #在这里再按回车用它提供的默认值
Last sector (2048-15634398, default = 15634398) or {+-}size{KMGTP}: +512MB
Current type is 'Apple HFS/HFS+' #无视这行

Hex code or GUID (L to show codes, Enter = AF00): EF00
Changed system type of partition to 'EFI System'

# 主目录
Command (? for help): n
Partition number (1-128, default 1): #在这里按回车用它提供的默认值
First sector (34-15634398, default = 2048) or {+-}size{KMGTP}: #在这里再按回车用它提供的默认值
Last sector (2048-15634398, default = 15634398) or {+-}size{KMGTP}: #在这里也按回车，easy
Current type is 'Apple HFS/HFS+' #无视这行
Hex code or GUID (L to show codes, Enter = AF00): 8300
Changed system type of partition to 'Linux Filesystem'

# 刷盘
Command (? for help): w
Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
PARTITIONS!!

Do you want to proceed? (Y/N): y
OK; writing new GUID partition table (GPT) to /dev/sda.
The operation has completed successfully.

# 查看分区
> gdisk -l /dev/nvme0n1

# 格式化主目录
> mkfs.ext4 /dev/nvme0n1p2
```

# 挂载
```
> mount /dev/nvme0n1p2 /mnt
> mkdir /mnt/boot
> mount /dev/nvme0n1p1 /mnt/boot
```

# 安装linux
## 找源
[reflector]
## 安装
```
> pacstrap /mnt base linux linux-firmware
```

# 挂载
uuid模式：`-U`，默认目录模式
```
> genfstab -U /mnt >> /mnt/etc/fstab
```

# bootctl启动器
```
> arch-chroot /mnt
> bootctl install
> vim /boot/loader/loader.conf
default arch
timeout 3
> vim /boot/loader/entries/arch.conf
title   Arch Linux
linux   /vmlinuz-linux
initrd  /initramfs-linux.img
> echo "options root=PARTUUID=$(blkid -s PARTUUID -o value /dev/nvme0n1p2) rw" >> /boot/loader/entries/arch.conf
> bootctl update
> systemctl enable fstrim.timer
```

# 进入系统
```
> arch-chroot /mnt
```

# 设置时区
```
> ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

# 设置语言