[TOC]

moved 和 ask
两者都是客户端重定向；
moved 异常说明槽已经确定迁移；
ask 异常说明槽还在迁移中，客户端访问的键有可能在 source 节点，有可能在 target 节点；


# 客户端路由
+ moved重定向
+ ask重定向
+ smart客户端

# moved重定向
```
(error) MOVED 866 172.21.16.4:6379
```
当我们使用操作 redis 单节点的 client 来操作集群时，常常能够遇到上面的报错。
按照 redis 官方规范，一个 Redis 客户端可以向集群中的任意节点（包括从节点）发送命令请求。
节点会对命令请求进行分析，如果该命令是集群可以执行的命令，那么节点会查找这个命令所要处理的键所在的槽。

# ASK重定向
客户端访问了正在迁移的键值对会得到 ask 异常，ask 异常会告诉访问的键值迁移到哪了，客户端再据此访问目标节点；

