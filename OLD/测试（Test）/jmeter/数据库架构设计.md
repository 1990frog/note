[TOC]

# 数据库性能测试范围
1. sql语句慢查询
2. 资源使用率
3. 数据库架构合理性
4. 数据库性能指标

# 数据库常用架构
+ 一主多从（优点：分担压力，缺点：主从延迟）
+ 双机热备

# 双机热备
![](https://raw.githubusercontent.com/1990frog/imagebed/default/1602318700_20200228115718900_784306875.png)
优点：没有主从延迟，master挂了vip立刻指向slave
缺点：压力大，迁移时会存在数据丢失

# 选择（看业务场景）
如果写操作并不多，读操作多，那么一主多从

# 主从同步工作原理
+ master将改变记录到二进制（binary log）中
+ slave将master的binary log events拷贝到它的中继日志（relay log）
+ slave重做中继日志中的事件，将改变反映它自己的数据

# 分库分表

# 拆分原因
+ 单表或库数据量太大
+ 硬件不能升级或无法升级

# 业务拆分
# 垂直拆分
# 水平拆分：一致性hash算法