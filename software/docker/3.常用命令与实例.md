[TOC]

# 命令
## 设置container的host
```
> docker run --add-host=myhostname:172.17.0.1
```
## 查看日志
```
> docker logs [container]
```
## 交互式运行
```
> docker exec -it [container] /bin/bash
> docker exec -it [container] /bin/sh
> docker exec -it [container] bash
> docker exec -it [container] ip a
```
## 性能监控
```
> docker stats
```
## 批量删除xx
```
> docker images | grep [keyword] | awk '{print $1}' | xargs docker rmi
```

## bind Mount
bind mount自docker早期便开始为人们使用了，用于将host机器的目录mount到container中。但是bind mount在不同的宿主机系统时不可移植的，比如Windows和Linux的目录结构是不一样的，bind mount所指向的host目录也不能一样。这也是为什么bind mount不能出现在dockerfile中的原因，因为这样dockerfile就不可移植了。

```
> docker run -it -v $(pwd)/host-dava:/container-data alpine sh
```

有几点需要注意：
+ host机器的目录路径必须为全路径(准确的说需要以/或~/开始的路径)，不然docker会将其当做volume而不是volume处理
+ 如果host机器上的目录不存在，docker会自动创建该目录
+ 如果container中的目录不存在，docker会自动创建该目录
+ 如果container中的目录已经有内容，那么docker会使用host上的目录将其覆盖掉（如果使用volume，host上存在数据，会使用container的内容将host覆盖）


# 常用容器创建
## mysql
```
> docker run -d -p 3306:3306 -v /配置文件/:/etc/mysql/conf.d/ -v /数据库文件/:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql mysql
```

## mongodb
```
> docker run -d -p 27017:27017 -v /配置文件:/data/configbd -v /数据库文件:/data/db --name mongodb mongo
```

## redis
```
> docker run -d -p 6379:6379 --name redis redis
```
## sqlserver
docker run -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=P@ssw0rd' -p 1433:1433 --name mssql -d microsoft/mssql-server-linux

## oracle

## hive

## greenplum
docker run -it -p 5432:5432 datagrip/greenplum






---

–restart always：开机启动
–privileged=true：提升容器内权限
-v=/mysqltest/config/my.cnf:/etc/my.cnf：映射配置文件
-v=/mysqltest/data:/var/lib/mysql：映射数据目录