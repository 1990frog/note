[TOC]

# 数据类型
变量就是申请内存来存储值。也就是说，当创建变量的时候，需要在内存中申请空间。
内存管理系统根据变量的类型为变量分配存储空间，分配的空间只能用来储存该类型数据。
因此，通过定义不同类型的变量，可以在内存中储存整数、小数或者字符。

1Byte = 8bit

# Java的两大数据类型
一共8种（byte,short,int,long,float,double,boolean,char）
+ 基本数据类型
+ 引用数据类型
![Java数据类型 (1)](_v_images/20191226153543548_2058611369.png)

![数据类型转换](_v_images/20191226160534856_1998625006.png)
# 基本数据类型
在 Java 中， 一共有 8种基本类型（primitive type), 其中有 4 种整型、2 种浮点类型、 1 种用于表示 Unicode 编码的字符单元的字符类型 char 和 1 种用于表示真值的 boolean 类型。

# 整型
整型用于表示没有小数部分的数值

| 类型  | 存储需求 |                                 取值范围                                  | 默认值 |
| ----- | -------- | ------------------------------------------------------------------------- | ------ |
| byte  | 1个字节  | -128（-2^7）到127（2^7-1）                                                | 0      |
| short | 2个字节  | -32768（-2^15）到32767（2^15 - 1）                                        | 0      |
| int   | 4个字节  | -2,147,483,648（-2^31）到 2,147,483,647（2^31 - 1）                       | 0      |
| long  | 8个字节  | -9,223,372,036,854,775,808（-2^63）到9,223,372,036,854,775,807（2^63 -1） | 0L     |

通常一字节等于八位比特
在 Java 中， 所有的数值类型所占据的字节数量与平台无关
Java没有任何无符号（unsigned) 形式的 int、 long、short 或 byte 类型

# 浮点型
用于表示有小数部分的数值,浮点数不能用来表示精确的值，如货币

|  类型  | 存储需求 |                                 取值范围                                  | 默认值 |
| ------ | -------- | ------------------------------------------------------------------------- | ------ |
| float  | 4个字节  | -2,147,483,648（-2^31）到 2,147,483,647（2^31 - 1）                       | 0.0f   |
| double | 8个字节  | -9,223,372,036,854,775,808（-2^63）到9,223,372,036,854,775,807（2^63 -1） | 0.0d   |

double 表示这种类型的数值精度是 float 类型的两倍（有人称之为双精度数值)。
绝大部分应用程序都采用 double 类型。
在很多情况下，float 类型的精度很难满足需求。
实际上，只有很少的情况适合使用 float 类型，例如，需要单精度数据的库，或者需要存储大量数据。

```java
/**
 * 0.060000000000000005
 * 0.5800000000000001
 * 401.49999999999994
 * 1.2329999999999999
 * 4.01
 */
public static void main(String[] args) {
    // 0.060000000000000005
    System.out.println(0.05+0.01);
    // 0.5800000000000001
    System.out.println(1.0-0.42);
    // 401.49999999999994
    System.out.println(4.015*100);
    // 1.2329999999999999
    System.out.println(123.3/100);
    // 4.01 四舍五入保留两位
    System.out.println(Math.round(4.015*100)/100.0);
}
```

# char类型
char类型是一个单一的 16 位 Unicode 字符；
最小值是 \u0000（即为0）；
最大值是 \uffff（即为65,535）；
char 数据类型可以储存任何字符；
例子：char letter = 'A';。

# boolean类型
boolean数据类型表示一位的信息；
只有两个取值：true 和 false；
这种类型只作为一种标志来记录 true/false 情况；
默认值是 false；
例子：boolean one = true。

# 注意
+ 自动类型转换
取值范围小的数据类型可以自动转换为取值范围大的数据类型。
![16011060-a96194ec7fe54ccd](_v_images/20191226151517472_1227081266.jpg)
+ 强制类型转换
数据类型取值范围大的变量不能赋值给数据类型取值范围小的变量，除非用强制转换类型,可能造成精度降低或溢出

```java
byte b = 3;//正确
int x = 3;//正确
b = x;//错误
x = b; //正确

b = b + 1;//错误
b = (byte)(b + 1); //强制转换后正确
b+=1; //正确
```

+=、-+、*=、/= 这些运算符比较特殊 本身就具有强制类型转换的作用。

# 引用数据类型
在Java中，引用类型的变量非常类似于C/C++的指针。引用类型指向一个对象，指向对象的变量是引用变量，在java里面除去基本数据类型的其它类型都是引用数据类型。

一个对象在内存中会请求一块空间来保存数据，根据对象的大小，它可能需要占用的空间大小也不等。访问对象的时候，我们不会直接是访问对象在内存中的数据，而是通过引用去访问。引用也是一种数据类型，它指示了对象在内存中的地址。

如果我们定义了不止一个引用指向同一个对象，那么这些引用是不相同的，因为引用也是一种数据类型，需要一定的内存空间（存储在stack，栈空间）来保存。但是它们的值是相同的，都指示同一个对象在内存（存储在heap，堆空间）的中位置，比如：
![16011060-1b40af435739818b](_v_images/20191226151913368_617596114.jpg)

# 拓展
+ 装箱与拆箱
Java为每种基本数据类型分别设计了对应的类，称之为包装类(Wrapper Classes)
装箱:自动将基本数据类型转换为对应的包装类,
拆箱:自动将包装类转换为对应的基本数据类型

```java
//装箱
Integer num = 10;
//拆箱
int num1 = num;
```
装箱操作会创建对象，频繁的装箱操作会消耗许多内存，影响性能，所以可以避免装箱的时候应该尽量避免。

在自动装箱时对于值从–128到127之间的值，它们被装箱为Integer对象后，会存在内存中被重用，始终只存在一个对象
而如果超过了从–128到127之间的值，被装箱后的Integer对象并不会被重用，即相当于每次装箱时都新建一个 Integer对象
[传送门](https://www.cnblogs.com/wang-yaz/p/8516151.html)

# 浅拷贝与深拷贝
浅拷贝：浅拷贝是将原始对象中的数据型属性拷贝到新对象中去，将引用型属性的“引用”复制到新对象中去，不把“引用的对象”复制进去，所以原始对象和新对象引用同一对象，新对象中的引用型属性发生变化会导致原始对象中的对应属性也发生变化(String类型除外，在修改String属性的时候会创建新的String对象)，通过clone和Cloneable可使用浅拷贝,一般不使用浅拷贝。

深拷贝：将一个对象拷贝时，不论是基本数据类型还有引用类型，都是重新创建的。简单来说，就是深复制进行了完全彻底的复制，之后的新对象中的引用型字段发生改变，不会引起原始对象中的字段发生改变，可通过序列化实现深拷贝，编程技巧上可通过将对象转化为JSON字符串然后再将JOSN字符串转化为对象快速使用深拷贝。
[java的四种引用类型](https://www.cnblogs.com/liyutian/p/9690974.html)

# 变量
在Java语言中，所有的变量在使用前必须声明。声明变量的基本格式如下：
```java
type identifier [ = value][, identifier [= value] ...]
```
格式说明：type为Java数据类型。identifier是变量名。可以使用逗号隔开来声明多个同类型变量。

Java语言支持的变量分为三类：

|          |              静态变量              |         成员变量         |          局部变量          |
| -------- | ---------------------------------- | ------------------------ | -------------------------- |
| 含义     | 类中方法外,用static修饰            | 类中方法外,无static修饰  | 方法内,无 static修饰       |
| 初始化值 | 有默认初始化值                     | 有默认初始化值           | 无,先定义,初始化后才能使用 |
| 调用方式 | 对象调用，类名调用，支持访问修饰符 | 对象调用，支持访问修饰符 | 不能被外部调用             |
| 存储位置 | 方法区                             | 堆中                     | 栈中                       |
| 生命周期 | 与类共存亡                         | 与对象共存亡             | 被创建直到方法执行完成     |
| 别名     | 类变量                             | 实例变量                 | -                          |

默认初始化值:数值型变量默认值是0，布尔型默认值是false，引用类型默认值是null

示例
```java
public class Variable{
    public static int allClicks; // 类变量

    private String str="hello"; // 实例变量

    public void method(){

        int i =0;  // 局部变量

    }
}
```

# 常量
当某个值经常被使用且不再改变的时候可以定义为常量。
Java中，主要是利用final关键字（在Java类中灵活使用Static关键字）来进行常量定义，常量定义(常量取名一般都用大写字符)的时候，就需要对常量进行初始化，[传送门](https://www.cnblogs.com/xiaoqv/articles/2207500.html)
final关键字不仅可以用来修饰基本数据类型的常量，还可以用来修饰对象(也可以修饰类和方法)

经常使用的是类常量，例如：
```java
public class Variable{
    public final static int MAX_SIZE=10; // 类常量

    public void method(){
        MAX_SIZE=100;  //  错误
    }
}
```

