# 线程安全：

《Java Concurrency In Practice》的作者Brian Goetz对“线程安全”有一个比较恰当的定义：“当多个线程访问一个对象时，如歌不用考虑这些线程在运行时环境下的调度和交替执行，也不需要进行额外的同步，或者在调用方进行任何其他的协调操作，调用这个对象的行为都可以获得正确的结果，那这个对象是线程安全的”。
这句话的意思是：不管业务中遇到怎样的多个线程访问某对象或某方法的情况，而在编程这个业务逻辑的时候，都不需要额外做任何额外的处理（也就是可以像单线程编程一样），程序也可以正常运行（不会因为多线程而出错），就可以称为线程安全。
相反，如果在编程的时候，需要考虑这些线程在运行时的调度和交替（例如在get()调用期间不能调用set()），或者需要进行额外的同步（比如使用synchronized关键字等），那么就是线程不安全的。

全都线程安全？
运行速度、设计成本、trade off
完全不用于多线程：不过度设计

什么情况下会出现线程安全问题，怎么避免？
运行结果错误：a++多线程下出现消失的请求现象
活跃性问题：死锁、活锁、饥饿
对象发布和初始化的时候的安全问题


# 对象发布和初始化的时候的安全问题

什么是发布
什么是溢出
1.方法返回一个private对象(private的本意是不让外部访问)
2.还未完成初始化(构造函数没完全执行完毕)就把对象提供给外界,比如:
在构造函数中未初始化完毕就this赋值
隐式溢出(注册监听事件)
构造函数中运行线程

# 各种需要考虑线程安全的情况

1.访问共享的变量或资源，会有并发风险，比如对象的属性、静态变量、共享缓存、数据库等

2.所有依赖时序的操作，即使每一步操作都是线程安全的，还是存在并发问题：read-modify-write、check-then-act

3.不同的数据之间存在捆绑关系的时候

4.我们使用其他类的时候，如果对方没有声明自己是线程安全的
